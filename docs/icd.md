# Interface Control Document (ICD) - `svc-scheduler`

<center>

<img src="https://github.com/Arrow-air/tf-github/raw/main/src/templates/doc-banner-services.png" style="height:250px" />

</center>

## Overview

This document defines the gRPC interface unique to the `svc-scheduler` microservice.

Attribute | Description
--- | ---
Status | Draft

## Related Documents

Document | Description
--- | ---
[High-Level Concept of Operations (CONOPS)](https://github.com/Arrow-air/se-services/blob/develop/docs/conops.md)| Overview of Arrow microservices.
[High-Level Interface Control Document (ICD)](https://github.com/Arrow-air/se-services/blob/develop/docs/icd.md) | Interfaces and frameworks common to all Arrow microservices.
[Requirements - `svc-scheduler`](https://docs.google.com/spreadsheets/d/1hLGIY6v_-GWK0jljLleN9nCiaRth0uKqRwssCJGIpuo/edit#gid=0) | Requirements and user stories for this microservice.
[Concept of Operations - `svc-scheduler`](./conops.md) | Defines the motivation and duties of this microservice.
[Software Design Document (SDD) - `svc-scheduler`](./sdd.md) | Specifies the internal activity of this microservice.

## Frameworks

See the High-Level ICD.

## gRPC

### Files

[svc-scheduler-grpc.proto](../proto/svc-scheduler-grpc.proto) | Common gRPC interfaces, protocol buffer file.
[grpc.rs](../server/src/grpc.rs) | Autogenerated Rust Code

### Integrated Authentication & Encryption

See the High-Level ICD.

### gRPC Server Methods ("Services")

| Service          | Arguments                                                                                                                                                                                        | Description                                                                                                                                                  |
|------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `is_ready`       | (empty)                                                                                                                                                                                          | Returns `true` if server is up and running.                                                                                                                  |
| `query_flight`   | `bool` isCargo<br/>`uint32` persons<br/>`uint32` weight_grams<br/>`Timestamp` departure_time<br/>`Timestamp` arrival_time<br/>`string` vertiport_depart_id<br/>`string` vertiport_arrive_id<br/> | Takes requested departure and arrival vertiport ids and departure/arrival time window and returns next available flight draft. (as an array with one result) |
| `confirm_flight` | id                                                                                                                                                                                               | Takes `id` of the draft flight plan returned from the `query_flight` and confirms the flight.                                                                |
| `cancel_flight`  | id                                                                                                                                                                                               | Takes `id` of the flight plan (either draft or confirmed) and cancels the flight.                                                                            |
