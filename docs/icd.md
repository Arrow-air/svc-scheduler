![Arrow Banner](https://github.com/Arrow-air/tf-github/raw/main/src/templates/doc-banner-services.png)

# Interface Control Document (ICD) - `svc-scheduler`

## :telescope: Overview

This document defines the gRPC interface unique to the `svc-scheduler` microservice.

### Metadata

| Attribute     | Description                                                       |
| ------------- |-------------------------------------------------------------------|
| Maintainer(s) | [Services Team](https://github.com/orgs/Arrow-air/teams/services) |
| Stuckee       | A.M. Smith ([@ServiceDog](https://github.com/servicedog))         |
| Status        | Development                                                       |

## :books: Related Documents

Document | Description
--- | ---
[High-Level Concept of Operations (CONOPS)](https://github.com/Arrow-air/se-services/blob/develop/docs/conops.md) | Overview of Arrow microservices.
[High-Level Interface Control Document (ICD)](https://github.com/Arrow-air/se-services/blob/develop/docs/icd.md)  | Interfaces and frameworks common to all Arrow microservices.
[Requirements - `svc-scheduler`](https://nocodb.arrowair.com/dashboard/#/nc/view/bdffd78a-75bf-40b0-a45d-948cbee2241c) | Requirements and user stories for this microservice.
[Concept of Operations - `svc-scheduler`](./conops.md) | Defines the motivation and duties of this microservice.
[Interface Control Document (ICD) - `svc-scheduler`](./icd.md) | Defines the inputs and outputs of this microservice.
[Software Design Document (SDD) - `svc-scheduler`](./sdd.md) | Specifies the internal activity of this microservice.
[Routing Scenarios](https://docs.google.com/presentation/d/1Nt91KVIczhxngurfyeIJtG8J0m_38jGU1Cnqm1_BfPc/edit#slide=id.g1454d6dfbcf_0_731) | Graphical representation of various routing scenarios

## :hammer: Frameworks

See [High-Level Services ICD](https://github.com/Arrow-air/se-services/blob/develop/docs/icd.md).

## :speech_balloon: gRPC

### Files

[grpc.proto](../proto/grpc.proto) | Common gRPC interfaces, protocol buffer file.
[grpc.rs](../client-grpc/src/grpc.rs) | Autogenerated rust client and types

### Integrated Authentication & Encryption

See [High-Level Services ICD](https://github.com/Arrow-air/se-services/blob/develop/docs/icd.md).

### gRPC Server Methods ("Services")

| Service | Arguments | Description |
| --- | --- | --- |
| `is_ready` | (empty) | Returns `true` if server is up and running. |
| `confirm_itinerary` | `string` id<br>`string` user_id | Takes `id` (UUID) of the draft itinerary and the user's UUID and confirms the flight. |
| `cancel_itinerary`  | `string` id | Takes `id` (UUID) of the itinerary (either draft or confirmed) and cancels it. |
| `query_flight` | `bool` isCargo<br/>`uint32` persons<br/>`uint32` weight_grams<br/>`Timestamp` earliest departure time<br/>`Timestamp` latest arrival time<br/>`string` vertiport_depart_id<br/>`string` vertiport_arrive_id<br/> | Takes requested departure and arrival vertiport UUIDs and a time window for the itinerary to occur and returns a number of draft itineraries. |
